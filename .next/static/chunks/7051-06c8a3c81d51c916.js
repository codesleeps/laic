"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7051],{883:(e,t,r)=>{r.d(t,{Hy:()=>_});var n=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&u(e,r,t[r]);if(s)for(var r of s(t))l.call(t,r)&&u(e,r,t[r]);return e},f=(e,t)=>o(e,i(t)),d=class extends Error{constructor(e,t,r){super(t||e.toString(),{cause:r}),this.status=e,this.statusText=t,this.error=r}},p=async(e,t)=>{var r,n,o,i,s,a;let l=t||{},u={onRequest:[null==t?void 0:t.onRequest],onResponse:[null==t?void 0:t.onResponse],onSuccess:[null==t?void 0:t.onSuccess],onError:[null==t?void 0:t.onError],onRetry:[null==t?void 0:t.onRetry]};if(!t||!(null==t?void 0:t.plugins))return{url:e,options:l,hooks:u};for(let c of(null==t?void 0:t.plugins)||[]){if(c.init){let n=await (null==(r=c.init)?void 0:r.call(c,e.toString(),t));l=n.options||l,e=n.url}u.onRequest.push(null==(n=c.hooks)?void 0:n.onRequest),u.onResponse.push(null==(o=c.hooks)?void 0:o.onResponse),u.onSuccess.push(null==(i=c.hooks)?void 0:i.onSuccess),u.onError.push(null==(s=c.hooks)?void 0:s.onError),u.onRetry.push(null==(a=c.hooks)?void 0:a.onRetry)}return{url:e,options:l,hooks:u}},h=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(){return this.options.delay}},g=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(e){return Math.min(this.options.maxDelay,this.options.baseDelay*2**e)}},m=async e=>{let t={},r=async e=>"function"==typeof e?await e():e;if(null==e?void 0:e.auth){if("Bearer"===e.auth.type){let n=await r(e.auth.token);if(!n)return t;t.authorization=`Bearer ${n}`}else if("Basic"===e.auth.type){let n=r(e.auth.username),o=r(e.auth.password);if(!n||!o)return t;t.authorization=`Basic ${btoa(`${n}:${o}`)}`}else if("Custom"===e.auth.type){let n=r(e.auth.value);if(!n)return t;t.authorization=`${r(e.auth.prefix)} ${n}`}}return t},v=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function y(e){if(void 0===e)return!1;let t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}function b(e){try{return JSON.parse(e)}catch(t){return e}}function E(e){return"function"==typeof e}async function R(e){let t=new Headers(null==e?void 0:e.headers);for(let[r,n]of Object.entries(await m(e)||{}))t.set(r,n);if(!t.has("content-type")){let r=y(null==e?void 0:e.body)?"application/json":null;r&&t.set("content-type",r)}return t}var T=class e extends Error{constructor(t,r){super(r||JSON.stringify(t,null,2)),this.issues=t,Object.setPrototypeOf(this,e.prototype)}};async function w(e,t){let r=await e["~standard"].validate(t);if(r.issues)throw new T(r.issues);return r.value}var O=["get","post","put","patch","delete"],_=e=>async function(t,r){let n,o=f(c(c({},e),r),{plugins:[...(null==e?void 0:e.plugins)||[],(n=e||{},{id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(e,t){var r,o,i,s;let a=(null==(o=null==(r=n.plugins)?void 0:r.find(t=>{var r;return null!=(r=t.schema)&&!!r.config&&(e.startsWith(t.schema.config.baseURL||"")||e.startsWith(t.schema.config.prefix||""))}))?void 0:o.schema)||n.schema;if(a){let r=e;(null==(i=a.config)?void 0:i.prefix)&&r.startsWith(a.config.prefix)&&(r=r.replace(a.config.prefix,""),a.config.baseURL&&(e=e.replace(a.config.prefix,a.config.baseURL))),(null==(s=a.config)?void 0:s.baseURL)&&r.startsWith(a.config.baseURL)&&(r=r.replace(a.config.baseURL,""));let n=a.schema[r];if(n){let r=f(c({},t),{method:n.method,output:n.output});return(null==t?void 0:t.disableValidation)||(r=f(c({},r),{body:n.input?await w(n.input,null==t?void 0:t.body):null==t?void 0:t.body,params:n.params?await w(n.params,null==t?void 0:t.params):null==t?void 0:t.params,query:n.query?await w(n.query,null==t?void 0:t.query):null==t?void 0:t.query})),{url:e,options:r}}}return{url:e,options:t}}})]});if(null==e?void 0:e.catchAllError)try{return await A(t,o)}catch(e){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:e}}}return await A(t,o)},A=async(e,t)=>{var r,n,o,i,s,a,l,u;let{hooks:m,url:T,options:_}=await p(e,t),S=function(e){if(null==e?void 0:e.customFetchImpl)return e.customFetchImpl;if("undefined"!=typeof globalThis&&E(globalThis.fetch))return globalThis.fetch;if("undefined"!=typeof window&&E(window.fetch))return window.fetch;throw Error("No fetch implementation found")}(_),U=new AbortController,x=null!=(r=_.signal)?r:U.signal,P=function(e,t){let{baseURL:r,params:n,query:o}=t||{query:{},params:{},baseURL:""},i=e.startsWith("http")?e.split("/").slice(0,3).join("/"):r||"";if(e.startsWith("@")){let t=e.toString().split("@")[1].split("/")[0];O.includes(t)&&(e=e.replace(`@${t}/`,"/"))}i.endsWith("/")||(i+="/");let[s,a]=e.replace(i,"").split("?"),l=new URLSearchParams(a);for(let[e,t]of Object.entries(o||{}))null!=t&&l.set(e,String(t));if(n)if(Array.isArray(n))for(let[e,t]of s.split("/").filter(e=>e.startsWith(":")).entries()){let r=n[e];s=s.replace(t,r)}else for(let[e,t]of Object.entries(n))s=s.replace(`:${e}`,String(t));(s=s.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(s=s.slice(1));let u=l.toString();return(u=u.length>0?`?${u}`.replace(/\+/g,"%20"):"",i.startsWith("http"))?new URL(`${s}${u}`,i):`${i}${s}${u}`}(T,_),I=function(e){if(!(null==e?void 0:e.body))return null;let t=new Headers(null==e?void 0:e.headers);if(y(e.body)&&!t.has("content-type")){for(let[t,r]of Object.entries(null==e?void 0:e.body))r instanceof Date&&(e.body[t]=r.toISOString());return JSON.stringify(e.body)}return e.body}(_),$=await R(_),C=function(e,t){var r;if(null==t?void 0:t.method)return t.method.toUpperCase();if(e.startsWith("@")){let n=null==(r=e.split("@")[1])?void 0:r.split("/")[0];return O.includes(n)?n.toUpperCase():(null==t?void 0:t.body)?"POST":"GET"}return(null==t?void 0:t.body)?"POST":"GET"}(T,_),L=f(c({},_),{url:P,headers:$,body:I,method:C,signal:x});for(let e of m.onRequest)if(e){let t=await e(L);t instanceof Object&&(L=t)}("pipeTo"in L&&"function"==typeof L.pipeTo||"function"==typeof(null==(n=null==t?void 0:t.body)?void 0:n.pipe))&&!("duplex"in L)&&(L.duplex="half");let{clearTimeout:j}=function(e,t){let r;return!(null==e?void 0:e.signal)&&(null==e?void 0:e.timeout)&&(r=setTimeout(()=>null==t?void 0:t.abort(),null==e?void 0:e.timeout)),{abortTimeout:r,clearTimeout:()=>{r&&clearTimeout(r)}}}(_,U),N=await S(L.url,L);j();let M={response:N,request:L};for(let e of m.onResponse)if(e){let r=await e(f(c({},M),{response:(null==(o=null==t?void 0:t.hookOptions)?void 0:o.cloneResponse)?N.clone():N}));r instanceof Response?N=r:r instanceof Object&&(N=r.response)}if(N.ok){if("HEAD"===L.method)return{data:"",error:null};let e=function(e){let t=e.headers.get("content-type"),r=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!t)return"json";let n=t.split(";").shift()||"";return v.test(n)?"json":r.has(n)||n.startsWith("text/")?"text":"blob"}(N),r={data:"",response:N,request:L};if("json"===e||"text"===e){let e=await N.text(),t=null!=(i=L.jsonParser)?i:b;r.data=await t(e)}else r.data=await N[e]();for(let e of((null==L?void 0:L.output)&&L.output&&!L.disableValidation&&(r.data=await w(L.output,r.data)),m.onSuccess))e&&await e(f(c({},r),{response:(null==(s=null==t?void 0:t.hookOptions)?void 0:s.cloneResponse)?N.clone():N}));return(null==t?void 0:t.throw)?r.data:{data:r.data,error:null}}let k=null!=(a=null==t?void 0:t.jsonParser)?a:b,B=await N.text(),D=function(e){try{return JSON.parse(e),!0}catch(e){return!1}}(B),z=D?await k(B):null,q={response:N,responseText:B,request:L,error:f(c({},z),{status:N.status,statusText:N.statusText})};for(let e of m.onError)e&&await e(f(c({},q),{response:(null==(l=null==t?void 0:t.hookOptions)?void 0:l.cloneResponse)?N.clone():N}));if(null==t?void 0:t.retry){let r=function(e){if("number"==typeof e)return new h({type:"linear",attempts:e,delay:1e3});switch(e.type){case"linear":return new h(e);case"exponential":return new g(e);default:throw Error("Invalid retry strategy")}}(t.retry),n=null!=(u=t.retryAttempt)?u:0;if(await r.shouldAttemptRetry(n,N)){for(let e of m.onRetry)e&&await e(M);let o=r.getDelay(n);return await new Promise(e=>setTimeout(e,o)),await A(e,f(c({},t),{retryAttempt:n+1}))}}if(null==t?void 0:t.throw)throw new d(N.status,N.statusText,D?z:B);return{data:null,error:f(c({},z),{status:N.status,statusText:N.statusText})}}},2861:(e,t,r)=>{r.d(t,{VY:()=>h});var n=r(9208);r(883),r(6199);var o=r(8603),i=r(3813);function s(e){return{newRole:e=>{var t;return{authorize(e,r="AND"){let n=!1;for(let[i,s]of Object.entries(e)){let e=t[i];if(!e)return{success:!1,error:`You are not allowed to access resource: ${i}`};if(Array.isArray(s))n=s.every(t=>e.includes(t));else if("object"==typeof s)n="OR"===s.connector?s.actions.some(t=>e.includes(t)):s.actions.every(t=>e.includes(t));else throw new o.$("Invalid access control request");if(n&&"OR"===r)return{success:n};if(!n&&"AND"===r)return{success:!1,error:`unauthorized to access resource "${i}"`}}return n?{success:n}:{success:!1,error:"Not authorized"}},statements:t=e}},statements:e}}let a=s({organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"],ac:["create","read","update","delete"]}),l=a.newRole({organization:["update"],invitation:["create","cancel"],member:["create","update","delete"],team:["create","update","delete"],ac:["create","read","update","delete"]}),u=a.newRole({organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"],ac:["create","read","update","delete"]}),c=a.newRole({organization:[],member:[],invitation:[],team:[],ac:["read"]}),f={admin:l,owner:u,member:c};class d{createNewAbortSignal(){if(this.controller){let e=Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}constructor(){Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}}new d;let p=s({user:["create","list","set-role","ban","impersonate","delete","set-password","get","update"],session:["list","revoke","delete"]});p.newRole({user:["create","list","set-role","ban","impersonate","delete","set-password","get","update"],session:["list","revoke","delete"]}),p.newRole({user:[],session:[]});let h=e=>{let t=(0,n.eU)(!1),r=(0,n.eU)(!1),o=(0,n.eU)(!1),s=(0,n.eU)(!1),a={admin:l,member:c,owner:u,...e?.roles};return{id:"organization",$InferServerPlugin:{},getActions:(t,r,n)=>({$Infer:{ActiveOrganization:{},Organization:{},Invitation:{},Member:{},Team:{}},organization:{checkRolePermission:t=>(e=>{let t=e.options.roles||f;return((e,t)=>{if(!e.permissions&&!e.permission)return!1;let r=e.role.split(","),n=e.options.creatorRole||"owner",o=r.includes(n),i=e.allowCreatorAllPermissions||!1;if(o&&i)return!0;for(let n of r){let r=t[n],o=r?.authorize(e.permissions??e.permission);if(o?.success)return!0}return!1})(e,t)})({role:t.role,options:{ac:e?.ac,roles:a},permissions:t.permissions??t.permission})}}),getAtoms:e=>{let n=(0,i.u)(t,"/organization/list",e,{method:"GET"}),a=(0,i.u)([r],"/organization/get-full-organization",e,()=>({method:"GET"})),l=(0,i.u)([o],"/organization/get-active-member",e,{method:"GET"}),u=(0,i.u)([s],"/organization/get-active-member-role",e,{method:"GET"});return{$listOrg:t,$activeOrgSignal:r,$activeMemberSignal:o,$activeMemberRoleSignal:s,activeOrganization:a,listOrganizations:n,activeMember:l,activeMemberRole:u}},pathMethods:{"/organization/get-full-organization":"GET","/organization/list-user-teams":"GET"},atomListeners:[{matcher:e=>"/organization/create"===e||"/organization/delete"===e||"/organization/update"===e,signal:"$listOrg"},{matcher:e=>e.startsWith("/organization"),signal:"$activeOrgSignal"},{matcher:e=>e.startsWith("/organization/set-active"),signal:"$sessionSignal"},{matcher:e=>e.includes("/organization/update-member-role"),signal:"$activeMemberSignal"},{matcher:e=>e.includes("/organization/update-member-role"),signal:"$activeMemberRoleSignal"}]}}},3065:(e,t,r)=>{r.d(t,{MB:()=>g});var n=r(883),o=r(6199),i=r(8603);function s(e,t="/api/auth"){if(function(e){try{let t=new URL(e).pathname.replace(/\/+$/,"")||"/";return"/"!==t}catch(t){throw new i.$(`Invalid base URL: ${e}. Please provide a valid base URL.`)}}(e))return e;let r=e.replace(/\/+$/,"");return t&&"/"!==t?(t=t.startsWith("/")?t:`/${t}`,`${r}${t}`):r}var a=r(9208),l=r(3813);let u={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},c=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,f={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:1/0,"-infinity":-1/0},d=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/,p={id:"redirect",name:"Redirect",hooks:{onSuccess(e){if(e.data?.url&&e.data?.redirect&&"undefined"!=typeof window&&window.location&&window.location)try{window.location.href=e.data.url}catch{}}}};var h=r(2115);function g(e){var t,r;let{pluginPathMethods:g,pluginsActions:m,pluginsAtoms:v,$fetch:y,$store:b,atomListeners:E}=((e,t)=>{let r="credentials"in Request.prototype,h=function(e,t,r,n){if(e)return s(e,t);if(!1!==n){let e=o._K.BETTER_AUTH_URL||o._K.NEXT_PUBLIC_BETTER_AUTH_URL||o._K.PUBLIC_BETTER_AUTH_URL||o._K.NUXT_PUBLIC_BETTER_AUTH_URL||o._K.NUXT_PUBLIC_AUTH_URL||("/"!==o._K.BASE_URL?o._K.BASE_URL:void 0);if(e)return s(e,t)}let a=r?.headers.get("x-forwarded-host"),l=r?.headers.get("x-forwarded-proto");if(a&&l)return s(`${l}://${a}`,t);if(r){let e=function(e){try{return new URL(e).origin}catch(e){return null}}(r.url);if(!e)throw new i.$("Could not get origin from request. Please provide a valid base URL.");return s(e,t)}if("undefined"!=typeof window&&window.location)return s(window.location.origin,t)}(e?.baseURL,e?.basePath,void 0,void 0)??"/api/auth",g=e?.plugins?.flatMap(e=>e.fetchPlugins).filter(e=>void 0!==e)||[],m={id:"lifecycle-hooks",name:"lifecycle-hooks",hooks:{onSuccess:e?.fetchOptions?.onSuccess,onError:e?.fetchOptions?.onError,onRequest:e?.fetchOptions?.onRequest,onResponse:e?.fetchOptions?.onResponse}},{onSuccess:v,onError:y,onRequest:b,onResponse:E,...R}=e?.fetchOptions||{},T=(0,n.Hy)({baseURL:h,...r?{credentials:"include"}:{},method:"GET",jsonParser:e=>e?function(e,t={strict:!0}){return function(e,t={}){let{strict:r=!1,warnings:n=!1,reviver:o,parseDates:i=!0}=t;if("string"!=typeof e)return e;let s=e.trim();if(s.length>0&&'"'===s[0]&&s.endsWith('"')&&!s.slice(1,-1).includes('"'))return s.slice(1,-1);let a=s.toLowerCase();if(a.length<=9&&a in f)return f[a];if(!c.test(s)){if(r)throw SyntaxError("[better-json] Invalid JSON");return e}if(Object.entries(u).some(([e,t])=>{let r=t.test(s);return r&&n&&console.warn(`[better-json] Detected potential prototype pollution attempt using ${e} pattern`),r})&&r)throw Error("[better-json] Potential prototype pollution attempt detected");try{return JSON.parse(s,(e,t)=>{if("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t){n&&console.warn(`[better-json] Dropping "${e}" key to prevent prototype pollution`);return}if(i&&"string"==typeof t){let e=function(e){let t=d.exec(e);if(!t)return null;let[,r,n,o,i,s,a,l,u,c,f]=t,p=new Date(Date.UTC(parseInt(r,10),parseInt(n,10)-1,parseInt(o,10),parseInt(i,10),parseInt(s,10),parseInt(a,10),l?parseInt(l.padEnd(3,"0"),10):0));if(u){let e=(60*parseInt(c,10)+parseInt(f,10))*("+"===u?-1:1);p.setUTCMinutes(p.getUTCMinutes()+e)}return p instanceof Date&&!isNaN(p.getTime())?p:null}(t);if(e)return e}return o?o(e,t):t})}catch(t){if(r)throw t;return e}}(e,t)}(e,{strict:!1}):null,customFetchImpl:fetch,...R,plugins:[m,...R.plugins||[],...e?.disableDefaultFetchPlugins?[]:[p],...g]}),{$sessionSignal:w,session:O}=function(e){let t=(0,a.eU)(!1);return{session:(0,l.u)(t,"/get-session",e,{method:"GET"}),$sessionSignal:t}}(T),_=e?.plugins||[],A={},S={$sessionSignal:w,session:O},U={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST","/delete-user":"POST"},x=[{signal:"$sessionSignal",matcher:e=>"/sign-out"===e||"/update-user"===e||e.startsWith("/sign-in")||e.startsWith("/sign-up")||"/delete-user"===e||"/verify-email"===e}];for(let e of _)e.getAtoms&&Object.assign(S,e.getAtoms?.(T)),e.pathMethods&&Object.assign(U,e.pathMethods),e.atomListeners&&x.push(...e.atomListeners);let P={notify:e=>{S[e].set(!S[e].get())},listen:(e,t)=>{S[e].subscribe(t)},atoms:S};for(let t of _)t.getActions&&Object.assign(A,t.getActions?.(T,P,e));return{get baseURL(){return h},pluginsActions:A,pluginsAtoms:S,pluginPathMethods:U,atomListeners:x,$fetch:T,$store:P}})(e),R={};for(let[e,t]of Object.entries(v)){R[`use${(r=e).charAt(0).toUpperCase()+r.slice(1)}`]=()=>(function(e,t={}){let r=(0,h.useRef)(e.get()),{keys:n,deps:o=[e,n]}=t,i=(0,h.useCallback)(t=>{let o=e=>{r.current!==e&&(r.current=e,t())};if(o(e.value),n?.length){let t;return t=new Set(n).add(void 0),e.listen((e,r,n)=>{t.has(n)&&o(e,r,n)})}return e.listen(o)},o),s=()=>r.current;return(0,h.useSyncExternalStore)(i,s,s)})(t)}return t={...m,...R,$fetch:y,$store:b},function e(r=[]){return new Proxy(function(){},{get(n,o){var i;if("string"!=typeof o||"then"===o||"catch"===o||"finally"===o)return;let s=[...r,o],a=t;for(let e of s)if(a&&"object"==typeof a&&e in a)a=a[e];else{a=void 0;break}return"function"==typeof a?a:"object"==typeof(i=a)&&null!==i&&"get"in i&&"function"==typeof i.get&&"lc"in i&&"number"==typeof i.lc?a:e(s)},apply:async(e,t,n)=>{let o="/"+r.map(e=>e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)).join("/"),i=n[0]||{},s=n[1]||{},{query:a,fetchOptions:l,...u}=i,c={...s,...l},f=function(e,t,r){let n=t[e],{fetchOptions:o,query:i,...s}=r||{};return n||(o?.method?o.method:s&&Object.keys(s).length>0?"POST":"GET")}(o,g,i);return await y(o,{...c,body:"GET"===f?void 0:{...u,...c?.body||{}},query:a||c?.query,method:f,async onSuccess(e){if(await c?.onSuccess?.(e),!E)return;let t=E.filter(e=>e.matcher(o));if(t.length)for(let e of t){let t=v[e.signal];if(!t)return;let r=t.get();setTimeout(()=>{t.set(!r)},10)}}})}})}()}},3813:(e,t,r)=>{r.d(t,{u:()=>s});var n=r(9208);let o=(e,t)=>((e,t,r,n)=>(e.events=e.events||{},e.events[15]||(e.events[15]=n(t=>{e.events[r].reduceRight((e,t)=>(t(e),e),{shared:{},...t})})),e.events[r]=e.events[r]||[],e.events[r].push(t),()=>{let n=e.events[r],o=n.indexOf(t);n.splice(o,1),n.length||(delete e.events[r],e.events[r+10](),delete e.events[r+10])}))(e,r=>{let n=t(r);n&&e.events[6].push(n)},5,t=>{let r=e.listen;e.listen=(...n)=>(e.lc||e.active||(e.active=!0,t()),r(...n));let n=e.off;return e.events[6]=[],e.off=()=>{n(),setTimeout(()=>{if(e.active&&!e.lc){for(let t of(e.active=!1,e.events[6]))t();e.events[6]=[]}},1e3)},()=>{e.listen=r,e.off=n}}),i="undefined"==typeof window,s=(e,t,r,s)=>{let a=(0,n.eU)({data:null,error:null,isPending:!0,isRefetching:!1,refetch:e=>l(e)}),l=e=>{let n="function"==typeof s?s({data:a.get().data,error:a.get().error,isPending:a.get().isPending}):s;r(t,{...n,query:{...n?.query,...e?.query},async onSuccess(e){a.set({data:e.data,error:null,isPending:!1,isRefetching:!1,refetch:a.value.refetch}),await n?.onSuccess?.(e)},async onError(e){let{request:t}=e,r="number"==typeof t.retry?t.retry:t.retry?.attempts,o=t.retryAttempt||0;r&&o<r||(a.set({error:e.error,data:null,isPending:!1,isRefetching:!1,refetch:a.value.refetch}),await n?.onError?.(e))},async onRequest(e){let t=a.get();a.set({isPending:null===t.data,data:t.data,error:null,isRefetching:!0,refetch:a.value.refetch}),await n?.onRequest?.(e)}}).catch(e=>{a.set({error:e,data:null,isPending:!1,isRefetching:!1,refetch:a.value.refetch})})};e=Array.isArray(e)?e:[e];let u=!1;for(let t of e)t.subscribe(()=>{i||(u?l():o(a,()=>{let e=setTimeout(()=>{u||(l(),u=!0)},0);return()=>{a.off(),t.off(),clearTimeout(e)}}))});return a}},5695:(e,t,r)=>{var n=r(8999);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},6199:(e,t,r)=>{r.d(t,{_K:()=>s});var n=r(9509);let o=Object.create(null),i=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?o:globalThis),s=new Proxy(o,{get:(e,t)=>i()[t]??o[t],has:(e,t)=>t in i()||t in o,set:(e,t,r)=>(i(!0)[t]=r,!0),deleteProperty(e,t){if(!t)return!1;let r=i(!0);return delete r[t],!0},ownKeys:()=>Object.keys(i(!0))});function a(e,t){return void 0!==n&&n.env?n.env[e]??t:"undefined"!=typeof Deno?Deno.env.get(e)??t:"undefined"!=typeof Bun?Bun.env[e]??t:t}void 0!==n&&n.env,Object.freeze({get BETTER_AUTH_SECRET(){return a("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return a("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return a("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return a("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return a("NODE_ENV","development")},get PACKAGE_VERSION(){return a("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return a("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}});let l={eterm:4,cons25:4,console:4,cygwin:4,dtterm:4,gnome:4,hurd:4,jfbterm:4,konsole:4,kterm:4,mlterm:4,mosh:24,putty:4,st:4,"rxvt-unicode-24bit":24,terminator:24,"xterm-kitty":24},u=new Map(Object.entries({APPVEYOR:8,BUILDKITE:8,CIRCLECI:24,DRONE:8,GITEA_ACTIONS:24,GITHUB_ACTIONS:24,GITLAB_CI:8,TRAVIS:8})),c=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/],f={reset:"\x1b[0m",bright:"\x1b[1m",dim:"\x1b[2m",fg:{black:"\x1b[30m",red:"\x1b[31m",green:"\x1b[32m",yellow:"\x1b[33m",blue:"\x1b[34m",magenta:"\x1b[35m",cyan:"\x1b[36m",white:"\x1b[37m"}},d=["info","success","warn","error","debug"],p={info:f.fg.blue,success:f.fg.green,warn:f.fg.yellow,error:f.fg.red,debug:f.fg.magenta};(e=>{let t=(void 0)??"error",r=e?.disableColors!==void 0?!e.disableColors:1!==function(){if(void 0!==a("FORCE_COLOR"))switch(a("FORCE_COLOR")){case"":case"1":case"true":return 4;case"2":return 8;case"3":return 24;default:return 1}if(void 0!==a("NODE_DISABLE_COLORS")&&""!==a("NODE_DISABLE_COLORS")||void 0!==a("NO_COLOR")&&""!==a("NO_COLOR")||"dumb"===a("TERM"))return 1;if(a("TMUX"))return 24;if("TF_BUILD"in s&&"AGENT_NAME"in s)return 4;if("CI"in s){for(let{0:e,1:t}of u)if(e in s)return t;return"codeship"===a("CI_NAME")?8:1}if("TEAMCITY_VERSION"in s)return null!==/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(a("TEAMCITY_VERSION"))?4:1;switch(a("TERM_PROGRAM")){case"iTerm.app":if(!a("TERM_PROGRAM_VERSION")||null!==/^[0-2]\./.exec(a("TERM_PROGRAM_VERSION")))return 8;return 24;case"HyperTerm":case"MacTerm":return 24;case"Apple_Terminal":return 8}if("truecolor"===a("COLORTERM")||"24bit"===a("COLORTERM"))return 24;if(a("TERM")){if(null!==/truecolor/.exec(a("TERM")))return 24;if(null!==/^xterm-256/.exec(a("TERM")))return 8;let e=a("TERM").toLowerCase();if(l[e])return l[e];if(c.some(t=>null!==t.exec(e)))return 4}return a("COLORTERM")?4:1}();return{...Object.fromEntries(d.map(n=>[n,(...[o,...i])=>((n,o,i=[])=>{if(!(d.indexOf(n)<=d.indexOf(t)))return;let s=((e,t,r)=>{let n=new Date().toISOString();return r?`${f.dim}${n}${f.reset} ${p[e]}${e.toUpperCase()}${f.reset} ${f.bright}[Better Auth]:${f.reset} ${t}`:`${n} ${e.toUpperCase()} [Better Auth]: ${t}`})(n,o,r);if(!e||"function"!=typeof e.log)return void("error"===n?console.error(s,...i):"warn"===n?console.warn(s,...i):console.log(s,...i));e.log("success"===n?"info":n,o,...i)})(n,o,i)])),get level(){return t}}})()},8603:(e,t,r)=>{r.d(t,{$:()=>n});class n extends Error{constructor(e,t){super(e),this.name="BetterAuthError",this.message=e,this.cause=t,this.stack=""}}},9208:(e,t,r)=>{r.d(t,{eU:()=>s});let n=[],o=0,i=0,s=e=>{let t=[],r={get:()=>(r.lc||r.listen(()=>{})(),r.value),lc:0,listen:e=>(r.lc=t.push(e),()=>{for(let t=o+4;t<n.length;)n[t]===e?n.splice(t,4):t+=4;let i=t.indexOf(e);~i&&(t.splice(i,1),--r.lc||r.off())}),notify(e,s){i++;let a=!n.length;for(let o of t)n.push(o,r.value,e,s);if(a){for(o=0;o<n.length;o+=4)n[o](n[o+1],n[o+2],n[o+3]);n.length=0}},off(){},set(e){let t=r.value;t!==e&&(r.value=e,r.notify(t))},subscribe(e){let t=r.listen(e);return e(r.value),t},value:e};return r}}}]);